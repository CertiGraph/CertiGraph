\begin{figure}[t]
\vspace{-1ex}
  \begin{lstlisting}[multicols = 2]
$//$$\braces{\forall \ga, \m{\finf}, \m{\tinf}, \m{from}, \m{to}.~\null \\ \p{gc{\_}graph}(\ga) * \p{\finf}(\m{\finf}) * \p{\tinf}(\m{\tinf}) /| \null \\ \m{compat}(\ga, \m{\finf}, \m{\tinf}, \m{from}, \m{to}) /| \null \\ \tx{st} = \m{start}(\ga, \m{from}) /| \tx{li} = \tx{st} + \m{gensize}(\ga, \m{from}) \\ \null /| \tx{sc} = \m{scanned}(\ga,\m{to}) /| \tx{nx} = \m{naddr}(\m{\tinf}, \m{to})} \defeq \theta_{1} $
void do_scan(value *st, *li, *sc, **nx){
 value *s; s = sc;
$//$$\braces{\theta_{1} /| \tx{s}= \m{scanned}(\ga,\m{to})} \defeq \theta_{4} $
 while(s < *nx){
$//$$\searrow $
  header_t hd = *((header_t *) s);
$//$$\swarrow $
  mlsize_t sz = Wosize_hd(hd);
  int tag = Tag_hd(hd);
  if (!No_scan(tag)){
   intnat j;
   for(j = 1; j <= sz; j++)
    forward (st, li, nx, &Field(s, j)); 
  } s += 1+sz;
}} 
\end{lstlisting}

\vspace{-0.4em}
\caption{Clight code and proof sketch for do\_scan}
\label{fig:doscan}
\vspace{-1em}
\end{figure}