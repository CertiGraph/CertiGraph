
\begin{figure}
\begin{lstlisting}[mathescape=true,showlines=true]
#define SIZE 8
#define IFTY INT_MAX - INT_MAX/SIZE

void dijkstra (int graph[SIZE][SIZE], int src, 
                           int *dist, int *prev) {
$//$ $\braces{\p{DijkGraph}(\gamma)}$
 int pq[SIZE]; int i, j, u, cost;
 for (i = 0; i < SIZE; i++) 
 {  dist[i] = INF; prev[i] = INF; pq[i] = INF; }
 dist[src] = 0; pq[src] = 0; prev[src] = src;
$//$ $\braces{\exists \m{priq}, \m{dist}, \m{prev}.~\p{DijkGraph}(\gamma) * \mathsf{PQ}(\texttt{pq},\m{priq}) * \mathsf{array}(\texttt{dist},\m{dist}) * \null \\ \mathsf{array}(\texttt{prev}, \m{prev}) /|
\m{dijk\_correct}(\gamma,\texttt{src},\m{prev},\m{dist},\m{priq})}$
 while (!pq_emp(pq)) {
  u = popMin(pq);
$//$ $\braces{\exists \m{prev'}, \m{dist'}, \m{priq'}.~\p{DijkGraph}(\gamma) *
\mathsf{PQ}(\texttt{pq},\m{priq'}) * \mathsf{array}(\texttt{dist},\m{dist'}) * \null \\ \mathsf{array}(\texttt{prev}, \m{prev'}) /| \texttt{u} \in \m{popped}(\m{priq'}) /| \null \\
\m{dijk\_correct\_weak}(\gamma, \texttt{src}, \m{prev'}, \m{dist'}, \m{priq'}, \texttt{i}, \texttt{u}, \texttt{SIZE})}$
  for (i = 0; i < SIZE; i++) {
   cost = graph[u][i]; 
   if (cost < INF) {
    if (dist[i] > dist[u] + cost)
    { dist[i] = dist[u] + cost; prev[i] = u; pq[i] = dist[i]; }
   } $//$ $\braces{\exists \m{prev'}, \m{dist'}, \m{priq'}.~\p{DijkGraph}(\gamma) * \mathsf{PQ}(\texttt{pq},\m{priq'}) * \mathsf{array}(\texttt{dist},\m{dist'}) * \null \\ \mathsf{array}(\texttt{prev}, \m{prev'}) /| \m{dijk\_correct\_weak}(\gamma, \texttt{src}, \m{prev'}, \m{dist'}, \m{priq'}, \texttt{i}, \texttt{u}, \texttt{SIZE})}$  
  } $//$ $\braces{\exists \m{prev'}, \m{dist'}, \m{priq'}.~\p{DijkGraph}(\gamma) * \mathsf{PQ}(\texttt{pq},\m{priq'}) * \mathsf{array}(\texttt{dist},\m{dist'}) * \null \\ \mathsf{array}(\texttt{prev}, \m{prev'}) /| \m{dijk\_correct}(\gamma, \texttt{src}, \m{prev'}, \m{dist'}, \m{priq'})}$
 } $//$ $\braces{\exists \m{priq}, \m{dist}, \m{prev}.~\p{DijkGraph}(\gamma) * \mathsf{PQ}(\texttt{pq},\m{priq}) * \mathsf{array}(\texttt{dist},\m{dist}) * \null \\ \mathsf{array}(\texttt{prev}, \m{prev}) /| 
\forall \m{dst} \in \m{priq}.~\m{priq}[\m{dst}] \not< \texttt{INF} /| \null \\
\m{dijk\_correct}(\gamma,\texttt{src},\m{prev},\m{dist},\m{priq})}$
 return; }
\end{lstlisting}
\end{figure}