
\begin{figure}
\begin{lstlisting}[mathescape=true,showlines=true]
void dijkstra (int graph[SIZE][SIZE], int src, 
                           int *dist, int *prev) {
$//$ $\braces{\p{DijkGraph}(\gamma)}$
 int pq[SIZE]; int i, j, u, cost;
 for (i = 0; i < SIZE; i++) 
 {  dist[i] = INF; prev[i] = INF; pq[i] = INF; }
 dist[src] = 0; pq[src] = 0; prev[src] = src;
$//$ $\braces{\p{DijkGraph}(\gamma) /| \exists \m{prev}, \m{dist}, \m{priq}.~
\m{dijk\_correct}(\gamma,\m{src},\m{prev},\m{dist},\m{priq})}$
 while (!pq_emp(pq)) {
  u = popMin(pq);
$//$ $\braces{\exists \m{prev'}, \m{dist'}, \m{priq'}.~ \texttt{u} \in \m{popped}(\m{priq'}) /| \null \\
\forall \m{dst}.~\texttt{0} \le \m{dst} < \texttt{SIZE} -> \m{inv\_popped}(\gamma, \m{src}, \m{prev'}, \m{dist'}, \m{priq'}, \m{dst}) /| \null \\
\forall \m{dst}.~\texttt{0} \le \m{dst} < \texttt{i} -> \m{inv\_unpopped}(\gamma, \m{src}, \m{prev'}, \m{dist'}, \m{priq'}, \m{dst}) /| \null \\
\forall \m{dst}.~\texttt{i} \le \m{dst} < \texttt{SIZE} -> \m{inv\_unpopped\_weak}(\gamma, \m{src}, \m{prev'}, \m{dist'}, \m{priq'}, \m{dst}, \texttt{u}) /| \null \\
\forall \m{dst}.~\texttt{0} \le \m{dst} < \texttt{SIZE} -> \m{inv\_unseen}(\gamma, \m{prev'}, \m{dist'}, \m{priq'}, \m{dst})}$
  for (i = 0; i < SIZE; i++) {
   cost = graph[u][i]; 
   if (cost < INF) {
    if (dist[i] > dist[u] + cost)
    { dist[i] = dist[u] + cost; prev[i] = u; pq[i] = dist[i]; }
   }  
  } // for loop over
$//$ $\braces{\p{DijkGraph}(\gamma) /| \texttt{i} = \texttt{SIZE} /| \m{dijk\_correct}(\gamma,\m{src},\m{prev'},\m{dist'},\m{priq'})}$
 } // while loop over
$//$ $\braces{\p{DijkGraph}(\gamma) /|
\forall \m{dst} \in \m{priq}.~\m{priq}[\m{dst}] \ge \texttt{INF} /| 
\m{dijk\_correct}(\gamma,\m{src},\m{prev},\m{dist},\m{priq})}$
 return;
}
\end{lstlisting}
\vspace{-1em}
\begin{equation*}
\begin{split}
&\!\!\!\!\!\!\m{path\_correct}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{mom}, \m{p}) \; \defeq \; 
\m{valid\_path}(\gamma, \m{p}) /| \m{path\_ends}(\gamma, \m{p}, \m{src}, \m{dst}) /| \null \\
&\m{path\_cost}(\gamma, \m{p}) \not= \texttt{INF} /| \m{dist}[\m{dst}] = \m{path\_cost}(\gamma, \m{p}) /| \forall \m{a, b}.~\m(a,b) \in p -> \m{prev}[\m{b}] = \m{a} \\
\vspace{1em}
&\!\!\!\!\!\!\m{path\_globally\_optimal}(\gamma, \m{src}, \m{dst}, \m{p}) \; \defeq \; 
\forall \m{p'}.~\m{valid\_path}(\gamma, \m{p'}) -> \m{path\_ends}(\gamma, \m{p'}, \m{src}, \m{dst}) -> \m{path\_cost}(\gamma, \m{p}) \le \m{path\_cost}(\gamma, \m{p'}) \\
\vspace{2em}
&\!\!\!\!\!\!\m{dijk\_correct}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{priq}) \; \defeq \; \forall \m{dst}.~\texttt{0} \le \m{dst} < \texttt{SIZE} -> \\
&\m{inv\_popped}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{priq}, \m{dst}) /|
\m{inv\_unpopped}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{priq}, \m{dst}) /| 
\m{inv\_unseen}(\gamma, \m{prev}, \m{dist}, \m{priq}, \m{dst}) \\
\vspace{1em}
&\!\!\!\!\!\!\m{inv\_popped}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{priq}, \m{dst}) \; \defeq \; \m{dst} \in \m{popped}(\m{priq}) -> \\
&\exists \m{path2dst}.~\m{path\_correct}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{dst}, \m{path2dst}) /| \null \\
&\forall \m{a, b}.~\m{(a, b)} \in \m{path2dst} -> \m{a} \in \m{popped}(\m{priq}) /| \m{b} \in \m{popped}(\m{priq}) /| \null \\
&\m{path\_globally\_optimal}(\gamma, \m{src}, \m{dst}, \m{path2dst}) \\
\vspace{1em}
&\!\!\!\!\!\!\m{inv\_unpopped}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{priq}, \m{dst}) \; \defeq \; \m{priq}[\m{dst}] < \texttt{INF} -> \\
&\texttt{let } \m{mom} \texttt{ := } \m{prev}[\m{dst}] \texttt{ in } \\
&\exists \m{path2mom}.~\m{path\_correct}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{mom}, \m{path2mom}) /| \null \\
&\forall \m{a, b}.~\m{(a, b)} \in \m{path2mom} -> \m{a} \in \m{popped}(\m{priq}) /| \m{b} \in \m{popped}(\m{priq}) /| \null \\
&\m{path\_globally\_optimal}(\gamma, \m{src}, \m{mom}, \m{path2mom}) /| \null \\
&\forall \m{mom', path2mom'}.~~\m{path\_correct}(\gamma, \m{src}, \m{prev}, \m{dist}, \m{mom'}, \m{path2mom'}) -> \\
&\forall \m{a, b}.~\m{(a, b)} \in \m{path2mom'} -> \m{a} \in \m{popped}(\m{priq}) /| \m{b} \in \m{popped}(\m{priq}) -> \\
&\m{path\_globally\_optimal}(\gamma, \m{src}, \m{mom'}, \m{path2mom'}) -> \\
&\m{path\_cost}(\m{path2mom} + \m{(mom, dst)}) \le \m{path\_cost}(\m{path2mom'} + \m{(mom', dst)}) \\
\vspace{1em}
&\!\!\!\!\!\!\m{inv\_unseen}(\gamma, \m{prev}, \m{dist}, \m{priq}, \m{dst}) \; \defeq \; \m{priq}[\m{dst}] = \texttt{INF} ->
(\m{dist}[\m{dst}] = \texttt{INF} /| \m{prev}[\m{dst}] = \texttt{INF})
\end{split}  
\end{equation*}
\end{figure}

