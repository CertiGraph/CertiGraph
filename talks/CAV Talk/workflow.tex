  \begin{tikzpicture}[remember picture,overlay, on grid,
      ourlib/.style={rounded corners=4pt, line width=0.8pt},
      cmd/.style={rectangle, fill=yellow!50!white, draw=black, rounded corners=4pt},
      file/.style={rounded corners=2pt, line width=1pt, fill=yellow!50!white},
      ->/.style={-Stealth, line width=1pt}]
    \path
    coordinate (nw) at ($(current page.north west) + (0.25, -1.5)$)
    coordinate (ne) at ($(current page.north east) + (-0.25, -1.5)$)
    coordinate (sw) at ($(current page.south west) + (0.25, 0.5)$)
    coordinate (se) at ($(current page.south east) + (-0.25, 0.5)$)
    coordinate (cright) at ($(current page.south west) + (2.85, 0.5)$)
    coordinate (asmleft) at ($(current page.south east) + (-2.85, 0.5)$)
    coordinate (coqleft) at ($(current page.south west)!.5!(current page.south east) +
    (-0.5, 0.5)$)
    coordinate (coqright) at ($(current page.south west)!.5!(current page.south east) +
    (0.5, 0.5)$);
    \draw [ourlib, fill=green!20!white] (nw) rectangle ($(sw) + (0.8, 0)$);
    \node at ($(nw)!.5!(sw) + (0.4, 0)$)
          {\rotatebox{-90}{\textsf{Mathematical Graph Library}}};
    \draw [ourlib, fill=red!20!white] (ne) rectangle ($(se) + (-0.8, 0)$);
    \node at ($(ne)!.5!(se) + (-0.4, 0)$)
          {\rotatebox{-90}{\textsf{Verified Software Toolchain (VST)}}};
    \draw [ourlib, fill=green!20!white] ($(nw) + (1.6, 0)$) rectangle
    ($(ne) + (-1.6, -0.8)$);
    \node at ($(nw)!.5!(ne) + (0, -0.4)$) {\textsf{Spatial Graph Library}};

    \draw [ourlib, fill=green!20!white] ($(nw) + (1.6, -1.6)$) -- ++(0, -0.8) --
    ++(1.6, 0) -- ++(0, -0.8) -- ++(-1.6, 0) -- ++(0, -0.8) -- ++(3.6, 0) --
    ++(0, 0.8) -- ++(-1.6, 0) -- ++(0, 0.8) -- ++(2, 0) -- ++(0, -0.5) -- ++(-1.6, 0)
    -- ++(0, -1.4) -- ++(3.6, 0) -- ++(0, 1.4) -- ++(-1.6, 0) -- ++(0, 0.5) -- ++(2, 0)
    -- ++(0, -0.8) -- ++(-1.6, 0) -- ++(0, -0.8) -- ++(4.2, 0) -- ++(0, 0.8) --
    ++(-1.6, 0) -- ++(0, 0.8) -- ($(ne) + (-1.6, -2.4)$) -- ++(0, 0.8) -- cycle;
    \node at ($(nw)!.5!(ne) + (0, -2)$)
          {\textsf{Verification of a Graph-Manipulating Function}};
    \draw [ourlib, fill=red!20!white] ($(sw) + (1.6, 0)$) -- ++(0, 0.8) --
    ($(cright) + (0.6, 0.8)$) -- ++(0, 1.8) -- ($(coqleft) + (-0.6, 2.6)$) --
    ++(0, -1.8) -- ($(coqright) + (0.6, 0.8)$) -- ++(0, 1.8) --
    ($(asmleft) + (-0.6, 2.6)$) -- ++(0, -1.8) -- ($(se) + (-1.6, 0.8)$) --
    ++(0, -0.8) -- cycle;
    \node at ($(sw)!.5!(se) + (0, 0.4)$) {\textsf{The CompCert Project}};
    \node (P0) at ($(nw) + (2.2, -3.6)$) {$\{P_0\}$};
    \node (C1) [cmd, right=1.2 of P0] {$C_1$};
    \node (P1) [right=2.4 of P0] {$\{P_1\}$};
    \node (P2) [right=2.4 of P1] {$\{P_2\}$};
    \node (P3) [right=2.8 of P2] {$\{...P_n\}$};
    \node (C2) [cmd, right=2.4 of C1] {$C_2$};
    \node (C3) [cmd, right=2.8 of C2] {$...C_n$};
    \draw [file] ($(sw)!.5!(se) + (-0.5, 1.2)$) -- ++(1, 0) -- ++ (0, 1.1) --
    +(-0.3, 0.3) -- +(-1, 0.3) -- cycle ++(1, 1.1) -- ++(-0.3, 0) -- ++(0, 0.3);
    \node at ($(sw)!.5!(se) + (0, 1.9)$) {\textsf{Coq}};
    \draw [file] ($(sw) + (1.6, 1.2)$) -- ++(1, 0) -- ++ (0, 1.1) --
    +(-0.3, 0.3) -- +(-1, 0.3) -- cycle ++(1, 1.1) -- ++(-0.3, 0) -- ++(0, 0.3);
    \node at ($(sw) + (2.1, 1.9)$) {\textsf{C}};
    \draw [file] ($(se) + (-2.6, 1.2)$) -- ++(1, 0) -- ++ (0, 1.1) --
    +(-0.3, 0.3) -- +(-1, 0.3) -- cycle ++(1, 1.1) -- ++(-0.3, 0) -- ++(0, 0.3);
    \node at ($(se) + (-2.1, 1.9)$) {\textsf{Asm}};
    \draw [->, dashed] ($(sw)!.5!(se) + (-0.3, 2.6)$) .. controls ++(-0.3, 0.5) and
    ($(C1.south) + (0.3, -1)$) .. (C1.south);
    \draw [->, dashed] ($(sw)!.5!(se) + (-0.2, 2.6)$) -- (C2.south);
    \draw [->, dashed] ($(sw)!.5!(se) + (-0.1, 2.6)$) .. controls ++(0.3, 0.5) and
    ($(C3.south) + (-0.3, -1)$) .. (C3.south);
    \node at ($(cright)!.5!(coqleft) + (0, 1.9)$) {\begin{tabular}{c} \textsf{Parser,}
        \\ \textsf{Simplifier} \end{tabular}};
    \node at ($(coqright)!.5!(asmleft) + (0, 1.9)$) {\begin{tabular}{c}
        \textsf{Verified} \\ \textsf{Compiler} \end{tabular}};
    \draw [->] ($(cright) + (0, 1.9)$) -- ++(0.6, 0);
    \draw [->] ($(coqleft) + (-0.6, 1.9)$) -- ++(0.6, 0);
    \draw [->] ($(coqright) + (0, 1.9)$) -- ++(0.6, 0);
    \draw [->] ($(asmleft) + (-0.6, 1.9)$) -- ++(0.6, 0);

    %% left interface
    \draw [line width=2pt] ($(nw) + (1.8, -0.4)$) -- +(-0.4, 0) +(-0.7, 0) --
    +(-1.2, 0) +(-0.6, -0.2) arc [start angle=-90, end angle=90, radius=0.2];
    \fill ($(nw) + (1.2, -0.4)$) circle [radius=0.1];
    \draw [line width=2pt] ($(nw) + (1.8, -2)$) -- +(-0.4, 0) +(-0.7, 0) --
    +(-1.2, 0) +(-0.6, -0.2) arc [start angle=-90, end angle=90, radius=0.2];
    \fill ($(nw) + (1.2, -2)$) circle [radius=0.1];

    %% right interface
    \draw [line width=2pt] ($(ne) + (-1.8, -2)$) -- +(0.4, 0) +(0.7, 0) --
    +(1.2, 0) +(0.6, 0.2) arc [start angle=90, end angle=270, radius=0.2];
    \fill ($(ne) + (-1.2, -2)$) circle [radius=0.1];
    \draw [line width=2pt] ($(se) + (-0.6, 0.4)$) -- +(-0.4, 0) +(-0.7, 0) --
    +(-1.2, 0) +(-0.6, -0.2) arc [start angle=-90, end angle=90, radius=0.2];
    \fill ($(se) + (-1.2, 0.4)$) circle [radius=0.1]; 
    
    %% up interface
    \draw [line width=2pt] ($(ne)!.5!(nw) + (2, -1.8)$) -- +(0, 0.4) +(0, 0.7) --
    +(0, 1.2) +(0.2, 0.6) arc [start angle=0, end angle=-180, radius=0.2];
    \fill ($(ne)!.5!(nw) + (2, -1.2)$) circle [radius=0.1];
  \end{tikzpicture}